<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Quartos ‚Ä¢ Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="topo">
  <h2>üõèÔ∏è Quartos</h2>
  <button class="voltar" onclick="location.href='painel.html'">‚Üê Voltar</button>
</div>

<div class="container">
  <button class="btn" onclick="novoQuarto()">+ Novo Quarto</button>

  <div id="lista-quartos" class="lista">
    Carregando...
  </div>
</div>

<!-- ORDEM CORRETA DOS SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="hotel-admin.js"></script>

<script>
async function carregar() {
  const quartos = await listarQuartos();
  const lista = document.getElementById("lista-quartos");

  lista.innerHTML = "";

  if (!quartos.length) {
    lista.innerHTML = "<p>Nenhum quarto cadastrado</p>";
    return;
  }

  quartos.forEach(q => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <h3>Quarto ${q.numero}</h3>
      <p>Tipo: ${q.tipo}</p>
    `;
    lista.appendChild(div);
  });
}

async function novoQuarto() {
  const numero = prompt("N√∫mero do quarto:");
  if (!numero) return;

  let tipo = prompt("Tipo do quarto (Standard/Luxo/Premium):");
  if (!tipo) tipo = "Standard";

  const hotel_id = await getHotelId();

  await criarQuarto({
    numero,
    tipo,
    hotel_id
  });

  carregar();
}

carregar();
</script>

</body>
</html>
