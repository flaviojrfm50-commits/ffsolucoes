<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Produto</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff;padding:20px}
img{width:100%;border-radius:16px}
button{margin-top:20px;width:100%;padding:12px;border:none;border-radius:10px;background:#22c55e;font-weight:bold}
</style>
</head>

<body>

<div id="produto"></div>

<script>
const sb = supabase.createClient(
  "https://pdajixsoowcyhnjwhgpc.supabase.co",
  "sb_publishable_LatlFlcxk6IchHe3RNmfwA_9Oq4EsZw"
);

const params = new URLSearchParams(location.search);
const id = params.get("id");
const app_id = params.get("app");

async function carregar(){
  const { data } = await sb
    .from("produtos")
    .select("*")
    .eq("id", id)
    .single();

  produto.innerHTML = `
    <img src="${data.imagem}">
    <h2>${data.nome}</h2>
    <p>${data.descricao}</p>
    <h3>R$ ${data.preco}</h3>
    <button onclick="add()">Adicionar ao carrinho</button>
  `;
}

function add(){
  let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
  carrinho.push({ id, app_id });
  localStorage.setItem("carrinho", JSON.stringify(carrinho));
  alert("Adicionado!");
}

const produto = document.getElementById("produto");
carregar();
</script>

</body>
</html>
