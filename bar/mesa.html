<script>
async function garantirPedido(){
  if(pedidoId) return;

  const { data, error } = await sb
    .from("pedidos")
    .insert({
      app_id,
      mesa_id,
      status: "aberto"
    })
    .select("id")
    .single();

  if(error){
    alert("Erro ao criar pedido");
    throw error;
  }

  pedidoId = data.id;
}
</script>
