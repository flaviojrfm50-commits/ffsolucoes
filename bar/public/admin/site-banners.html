<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Site P√∫blico - Banner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <div class="container">
    <h1>üñºÔ∏è Banner do Site</h1>
    <p>Este banner √© p√∫blico e corresponde ao site correto.</p>

    <div id="bannerBox" style="margin-top:20px;">
      <img id="bannerImg" style="max-width:100%; border-radius:12px;" src="./placeholder.jpg" alt="Banner do site">
    </div>
  </div>

<script>
/* ===== SUPABASE PUBLIC ===== */
const sb = supabase.createClient(
  "https://pdajixsoowcyhnjwhgpc.supabase.co",
  "sb_publishable_LatlFlcxk6IchHe3RNmfwA_9Oq4EsZw"
);

/* ===== PEGAR appId DA QUERY STRING ===== */
const params = new URLSearchParams(window.location.search);
const appId = params.get("app");

const bannerImg = document.getElementById("bannerImg");

/* ===== CARREGAR BANNER P√öBLICO ===== */
async function carregarBanner() {
  if (!appId) return; // Nenhum appId definido, usa placeholder

  // URL p√∫blica do banner no Supabase Storage
  const bannerUrl = `https://pdajixsoowcyhnjwhgpc.supabase.co/storage/v1/object/public/sites/${appId}/banner.jpg`;

  try {
    const res = await fetch(bannerUrl);
    if (res.ok) {
      bannerImg.src = bannerUrl; // Banner existe
    } else {
      console.log("Banner n√£o encontrado, usando placeholder");
      bannerImg.src = "./placeholder.jpg";
    }
  } catch (err) {
    console.log("Erro ao carregar banner, usando placeholder", err);
    bannerImg.src = "./placeholder.jpg";
  }
}

/* ===== INICIAR ===== */
carregarBanner();
</script>

</body>
</html>
