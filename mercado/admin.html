<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel | ffsolucoes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#020617;
  color:#fff;
}
.topo{
  background:#0f172a;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.topo h2{margin:0;font-size:20px}
.sair{
  background:#e53935;
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

.container{
  max-width:1000px;
  margin:24px auto;
  padding:16px;
}

.bemvindo{
  margin-bottom:20px;
  opacity:.9;
}
.bemvindo h3{margin:0 0 4px 0}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
}

.card{
  background:#0f172a;
  padding:14px;
  border-radius:14px;
  cursor:pointer;
  transition:.15s;
  min-height:110px;
}
.card:hover{
  background:#162033;
  transform:translateY(-2px);
}
.card h3{
  margin:0 0 6px 0;
  font-size:16px;
}
.card p{
  opacity:.75;
  font-size:13px;
  margin:0;
}
</style>
</head>

<body>

<script>
/* 游댏 VALIDA SESS츾O */
const admin = JSON.parse(localStorage.getItem("admin_logado"));

if(!admin || admin.tipo !== "mercado"){
  window.location.replace("login.html");
  throw new Error("Sess칚o inv치lida");
}
</script>

<div class="topo">
  <h2>游 Admin seu negocio</h2>
  <button class="sair" onclick="logout()">Sair</button>
</div>

<div class="container">
  <div class="bemvindo">
    <h3>Bem-vindo, <b id="nome"></b></h3>
    <p>Painel administrativo do mercado</p>
  </div>

  <div class="grid">

    <div class="card" onclick="go('admins.html')">
      <h3>游논 Administradores</h3>
      <p>Gerenciar usu치rios</p>
    </div>

    <div class="card" onclick="go('produtos.html')">
      <h3>游닍 Produtos</h3>
      <p>Controle de estoque</p>
    </div>

    <div class="card" onclick="go('vendas.html')">
      <h3>游 Vendas</h3>
      <p>Caixa do mercado</p>
    </div>

    <!-- 游늶 FIADOS -->
    <div class="card" onclick="go('fiados.html')">
      <h3>游늶 Fiados</h3>
      <p>D칤vidas / quitar</p>
    </div>

    <div class="card" onclick="go('relatorios.html')">
      <h3>游늵 Relat칩rios</h3>
      <p>Vendas e faturamento</p>
    </div>

    <div class="card" onclick="alternarPublico()">
      <h3>游대 Site P칰blico</h3>
      <p id="modoPublico">Modo: Cat치logo</p>
    </div>

    <div class="card" onclick="abrirSite()">
      <h3>游깴 Acessar Site</h3>
      <p>Visual p칰blico</p>
    </div>

    <div class="card" onclick="go('config-site.html')">
      <h3>丘뙖잺 Configurar Site</h3>
      <p>Vitrine / cat치logo</p>
    </div>

  </div>
</div>

<script>
document.getElementById("nome").innerText = admin.usuario;

/* navega칞칚o */
function go(pagina){
  window.location.href = pagina;
}

/* estado inicial */
const modoInicial = localStorage.getItem("publico_modo") || "catalogo";
atualizarLabel(modoInicial);

function alternarPublico(){
  const atual = localStorage.getItem("publico_modo") || "catalogo";
  const novo = atual === "catalogo" ? "site" : "catalogo";
  localStorage.setItem("publico_modo", novo);
  atualizarLabel(novo);
}

function atualizarLabel(modo){
  document.getElementById("modoPublico").innerText =
    modo === "site"
      ? "Modo: Site"
      : "Modo: Cat치logo";
}

function abrirSite(){
  const app = admin.app_id;
  const modo = localStorage.getItem("publico_modo") || "catalogo";

  const url =
    modo === "site"
      ? `../mercado/public/site.html?app=${app}`
      : `../mercado/public/catalogo.html?app=${app}`;

  window.open(url, "_blank");
}

function logout(){
  localStorage.removeItem("admin_logado");
  window.location.href = "login.html";
}
</script>

</body>
</html>

